\section{Multilevel Utilities}

In addition to the two-level {\tt AMRTools} operator objects, there
are a set of multilevel tools which have proved useful in various
multilevel AMR codes.

\subsection{Function {\tt computeSum}}

This function computes the volume-weighted sum of $\phi$ over an AMR
hierarchy by including only valid-region data in the sum. 
\begin{equation}
sum = \sum_{\ell=\ell_{base}}^{\ell{max}} \sum_{\Omega^\ell_{valid}}
(h^\ell)^D \phi^\ell_{\bf{i}}
\end{equation}

\begin{itemize}

\item
\begin{verbatim}
void
Real computeSum(const Vector<LevelData<FArrayBox>* >& a_phi,
                const Vector<int>&                    a_nRefFine,
                const Real&                           a_dxCrse,
                const Interval&                       a_comps = Interval(0,0),
                const int&                            a_lBase = 0);
\end{verbatim}
function which returns the volume-weighted sum of \verb/a_phi/
(essentially the integral of \verb/a_phi/) over
the valid regions of all levels $\ell \geq \tt{a\_lBase}$.
\\ {\bf Arguments:}
  \begin{itemize}
  \item
  \verb|a_phi| (not modified): data to be summed.
  \item
  \verb|a_nRefFine| (not modified): Vector of refinement ratios, where
  \verb/a_refFine[i]/ is the refinement ratios between levels $i$ and
  $i+1$. 
  \item
  \verb|a_dxCrse| (not modified): cell spacing on level \verb/a_lBase/.
  \item
  \verb|a_comps| (not modified): components of \verb/a_phi/ to be
  summed.
  \item
  \verb|a_lBase| (not modified): Coarsest level to be included in sum;
  sum will include all levels $\ell \geq \tt{a\_lBase}$. 

  \end{itemize}

\end{itemize}



\subsection{Function {\tt computeNorm}}

This function computes the norm of $\phi$ over an AMR
hierarchy by including only valid-region data in the computation.

\begin{itemize}

\item
\begin{verbatim}
void
Real computeNorm(const Vector<LevelData<FArrayBox>* >& a_phi,
                 const Vector<int>&                    a_nRefFine,
                 const Real&                           a_dxCrse,
                 const Interval&                       a_comps = Interval(0,0),
                 const int                             a_p = 2,
                 const int&                            a_lBase = 0);
\end{verbatim}
function which returns the $p-$norm of \verb/a_phi/ over
the valid regions of all levels $\ell \geq \tt{a\_lBase}$.
\\ {\bf Arguments:}
  \begin{itemize}
  \item
  \verb|a_phi| (not modified): data to be summed.
  \item
  \verb|a_nRefFine| (not modified): Vector of refinement ratios, where
  \verb/a_refFine[i]/ is the refinement ratios between levels $i$ and
  $i+1$. 
  \item
  \verb|a_dxCrse| (not modified): cell spacing on level \verb/a_lBase/.
  \item
  \verb|a_comps| (not modified): components of \verb/a_phi/ to be
  summed.
  \item
  \verb/a_p/ (not modified): type of norm to be computed. \verb/a_p/=0
  is the max (infinity) norm.
  \item
  \verb|a_lBase| (not modified): Coarsest level to be included in sum;
  sum will include all levels $\ell \geq \tt{a\_lBase}$. 

  \end{itemize}

\end{itemize}
